#!/usr/bin/env bash

if [[ $(type pip) ]]; then
    echo "Updating pip"
    pip list -o --format json \
        | python -c 'import sys, json; [print(item["name"]) for item in json.loads(sys.stdin.read())]' \
        | xargs --no-run-if-empty -t pip install -U
fi

if [[ $(type uv) ]]; then
    echo "Updating uv"
    uv tool upgrade --all
fi

if [[ $(type mise) ]]; then
    echo "Updating mise"
    mise cache clear
    mise self-update -y
    MISE_USE_VERSIONS_HOST=false mise up
fi

if [[ $(type pnpm) ]]; then
    echo "Updating pnpm"
    pnpm -g upgrade
    type mise && mise reshim
fi
